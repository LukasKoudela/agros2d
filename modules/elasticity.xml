<?xml version="1.0"?>
<module xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="module.xsd">
    <general id ="elasticity" name="Structural analysis" deformed_shape="1">
        <description>Structural analysis is the determination of the effects of loads on physical structures and their components.</description>
        <analyses>
            <analysis id="steadystate" type="steadystate" name="Steady state" solutions="2" />
        </analyses>
    </general>

    <constants />

    <macros />

    <volume>
        <quantity id="elasticity_young_modulus" shortname="E" />
        <quantity id="elasticity_poisson_ratio" shortname="nu" />
        <quantity id="elasticity_force_x" shortname="fx" />
        <quantity id="elasticity_force_y" shortname="fy" />
        <quantity id="elasticity_alpha" shortname="alpha" />
        <quantity id="elasticity_temperature" shortname="T" />
        <quantity id="elasticity_temperature_reference" shortname="Tr" />

        <weakforms>
            <weakform analysistype="steadystate">
                <quantity id="elasticity_young_modulus" />
                <quantity id="elasticity_poisson_ratio" />
                <quantity id="elasticity_force_x" />
                <quantity id="elasticity_force_y" />
                <quantity id="elasticity_alpha" />
                <quantity id="elasticity_temperature" />
                <quantity id="elasticity_temperature_reference" />

                <matrix i="1" j="1" planar="(((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) + 2*(E / (2.0*(1.0 + nu)))) * (udx * vdx)
                                            + (E / (2.0*(1.0 + nu))) * (udy * vdy)"
                                    axi="((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (r * udr * vdr + uval * vdr + udr * vval + uval * vval / (r + 1e-12)) +
                                         (E / (2.0*(1.0 + nu))) * (2 * r * udr * vdr + 2 * uval * vval / (r + 1e-12) + r * udz * vdz)" />
                <matrix i="1" j="2" planar="((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (udy * vdx)
                                            + (E / (2.0*(1.0 + nu))) * (udx * vdy)"
                                    axi="((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (r * udz * vdr + udz * vval) +
                                            (E / (2.0*(1.0 + nu))) * r * udr * vdz" />
                <matrix i="2" j="1" planar="(E / (2.0*(1.0 + nu))) * (udy * vdx)
                                            + ((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (udx * vdy)"
                                    axi="((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (r * udr * vdz + uval * vdz) +
                                             (E / (2.0*(1.0 + nu))) * r * udz * vdr"/>
                <matrix i="2" j="2" planar="(E / (2.0*(1.0 + nu))) * (udx * vdx)
                                            + (((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) + 2*(E / (2.0*(1.0 + nu)))) * (udy * vdy)"
                                    axi="r * ((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * udz * vdz +
                                         r * (E / (2.0*(1.0 + nu))) * (udr * vdr + 2 * udz * vdz)" />
                <vector i="1" j="1" planar="(((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) + 2*(E / (2.0*(1.0 + nu)))) * (updx * vdx)
                                            + (E / (2.0*(1.0 + nu))) * (updy * vdy)
                                            - fx * vval - ((3*(E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu)) + 2*E / (2.0*(1.0 + nu))) * alpha * (T - Tr)) * vdx"
                                    axi="((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (r * updr * vdr + upval * vdr + updr * vval + upval * vval / (r + 1e-12)) +
                                         (E / (2.0*(1.0 + nu))) * (2 * r * updr * vdr + 2 * upval * vval / (r + 1e-12) + r * updz * vdz)
                                         - r * fx * vval - r * ((3*(E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu)) + 2*E / (2.0*(1.0 + nu))) * alpha * (T - Tr)) * (vdr + vval / r)" />
                <vector i="1" j="2" planar="((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (updy * vdx)
                                            + (E / (2.0*(1.0 + nu))) * (updx * vdy)"
                                    axi="((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (r * updz * vdr + updz * vval) +
                                            (E / (2.0*(1.0 + nu))) * r * updr * vdz" />
                <vector i="2" j="1" planar="(E / (2.0*(1.0 + nu))) * (updy * vdx)
                                            + ((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (updx * vdy)"
                                    axi="((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * (r * updr * vdz + upval * vdz) +
                                           (E / (2.0*(1.0 + nu))) * r * updz * vdr" />
                <vector i="2" j="2" planar="(E / (2.0*(1.0 + nu))) * (updx * vdx)
                                            + (((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) + 2*(E / (2.0*(1.0 + nu)))) * (updy * vdy)
                                            - fy * vval - ((3*(E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu)) + 2*E / (2.0*(1.0 + nu))) * alpha * (T - Tr)) * vdy"
                                    axi="r * ((E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu))) * updz * vdz +
                                         r * (E / (2.0*(1.0 + nu))) * (updr * vdr + 2 * updz * vdz)
                                         - r * fy * vval - r * ((3*(E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu)) + 2*E / (2.0*(1.0 + nu))) * alpha * (T - Tr)) * vdz" />
            </weakform>
        </weakforms>
    </volume>
    	
    <surface>
        <quantity id="elasticity_displacement_x" shortname="dx" />
        <quantity id="elasticity_displacement_y" shortname="dy" />
        <quantity id="elasticity_force_x" shortname="fx" />
        <quantity id="elasticity_force_y" shortname="fy" />

        <weakforms>
            <weakform analysistype="steadystate" default="elasticity_fixed_fixed">
                <boundary id="elasticity_fixed_fixed" name="Fixed - fixed">
                    <quantity id="elasticity_displacement_x" />
                    <quantity id="elasticity_displacement_y" />

                    <essential i="1" planar="dx"
                                     axi="dx" />
                    <essential i="2" planar="dy"
                                     axi="dy" />
                </boundary>

                <boundary id="elasticity_fixed_free" name="Fixed - free">
                    <quantity id="elasticity_displacement_x" />
                    <quantity id="elasticity_force_y" />

                    <essential i="1" planar="dx"
                                     axi="dx" />
                    <vector i="2" j="2" planar="-fy * vval"
                                        axi="-fy * r * vval" />
                </boundary>

                <boundary id="elasticity_free_fixed" name="Free - fixed">
                    <quantity id="elasticity_force_x" />
                    <quantity id="elasticity_displacement_y" />

                    <vector i="1" j="1" planar="-fx * vval"
                                        axi="-fx * r * vval" />
                    <essential i="2" planar="dy"
                                     axi="dy" />
                </boundary>

                <boundary id="elasticity_free_free" name="Free - Free">
                    <quantity id="elasticity_force_x" />
                    <quantity id="elasticity_force_y" />

                    <vector i="1" j="1" planar="-fx * vval"
                                        axi="-fx * r * vval" />
                    <vector i="2" j="2" planar="-fy * vval"
                                        axi="-fy * r * vval" />
                </boundary>
            </weakform>
        </weakforms>
    </surface>

    <preprocessor>
        <volume>
            <group>
                <quantity id="elasticity_young_modulus" name="Young modulus"
                          shortname="E" shortname_html="&lt;i&gt;E&lt;/i&gt;" shortname_latex="E"
                          unit="Pa" unit_html="Pa" unit_latex="Pa" />
                <quantity id="elasticity_poisson_ratio" name="Poisson ratio"
                          shortname="nu" shortname_html="&lt;i&gt;&amp;nu;&lt;/i&gt;" shortname_latex="\nu"
                          unit="-" unit_html="-" unit_latex="-" />
                <quantity id="elasticity_force_x" name="Force - x"
                          shortname="fx" shortname_html="&lt;i&gt;f&lt;/i&gt;&lt;sub&gt;x&lt;/sub&gt;" shortname_latex="f_{x}"
                          unit="N/m3" unit_html="N.m&lt;sup&gt;-3&lt;/sup&gt;" unit_latex="N \cdot m^{-3}" />
                <quantity id="elasticity_force_y" name="Force - y"
                          shortname="fy" shortname_html="&lt;i&gt;f&lt;/i&gt;&lt;sub&gt;y&lt;/sub&gt;" shortname_latex="f_{y}"
                          unit="N/m3" unit_html="N.m&lt;sup&gt;-3&lt;/sup&gt;" unit_latex="N \cdot m^{-3}" />
                <quantity id="elasticity_alpha" name="Temperature coefficient"
                          shortname="alpha" shortname_html="&lt;i&gt;&amp;alpha;&lt;/i&gt;" shortname_latex="\alpha"
                          unit="1/K" unit_html="K&lt;sup&gt;-1&lt;/sup&gt;" unit_latex="K^{-1}" />
                <quantity id="elasticity_temperature" name="Temperature"
                          shortname="T" shortname_html="&lt;i&gt;T&lt;/i&gt;" shortname_latex="T"
                          unit="K" unit_html="K" unit_latex="K" />
                <quantity id="elasticity_temperature_reference" name="Reference emperature"
                          shortname="Tr" shortname_html="&lt;i&gt;T&lt;/i&gt;&lt;sub&gt;ref&lt;/sub&gt;" shortname_latex="T_{ref}"
                          unit="K" unit_html="K" unit_latex="K" />
            </group>
        </volume>
        <surface>
            <group>
                <quantity id="elasticity_displacement_x" name="Fixed - x" shortname="dx" unit="m" />
                <quantity id="elasticity_displacement_y" name="Fixed - y" shortname="dy" unit="m" />
                <quantity id="elasticity_force_x" name="Free - x" shortname="fx" unit="N/m2" unit_html="N.m&lt;sup&gt;-2&lt;/sup&gt;" unit_latex="N \cdot m^{-2}" />
                <quantity id="elasticity_force_y" name="Free - y" shortname="fy" unit="N/m2" unit_html="N.m&lt;sup&gt;-2&lt;/sup&gt;" unit_latex="N \cdot m^{-2}" />
            </group>
        </surface>
    </preprocessor>

    <postprocessor>
        <localvariables>
            <localvariable id="elasticity_displacement" name="Displacement" type="vector"
                           shortname="d" shortname_html="&lt;i&gt;d&lt;/i&gt;" shortname_latex="d"
                           unit="m" unit_html="m" unit_latex="m">
                <expression analysistype="steadystate" planar_x="value1"
                                                       planar_y="value2"
                                                       axi_r="value1"
                                                       axi_z="value2" />
            </localvariable>
            <localvariable id="elasticity_young_modulus" name="Young modulus" type="scalar"
                           shortname="E" shortname_html="&lt;i&gt;E&lt;/i&gt;" shortname_latex="E"
                           unit="Pa" unit_html="Pa" unit_latex="Pa" >
                <expression analysistype="steadystate" planar="E"
                                                       axi="E" />
            </localvariable>
            <localvariable id="elasticity_poisson_ratio" name="Poisson ratio" type="scalar"
                           shortname="nu" shortname_html="&lt;i&gt;&amp;nu;&lt;/i&gt;" shortname_latex="\nu"
                           unit="-" unit_html="-" unit_latex="-" >
                <expression analysistype="steadystate" planar="nu"
                                                       axi="nu" />
            </localvariable>
            <localvariable id="elasticity_inner_force" name="Inner force" type="vector"
                           shortname="f" shortname_html="&lt;i&gt;f&lt;/i&gt;" shortname_latex="f"
                           unit="N" unit_html="N" unit_latex="N" >
                <expression analysistype="steadystate" planar_x="fx"
                                                       planar_y="fy"
                                                       axi_r="fx"
                                                       axi_z="fy" />
            </localvariable>
            <localvariable id="elasticity_alpha" name="Temperature coefficient" type="scalar"
                           shortname="alpha" shortname_html="&lt;i&gt;&amp;alpha;&lt;/i&gt;" shortname_latex="\alpha"
                           unit="1/K" unit_html="K&lt;sup&gt;-1&lt;/sup&gt;" unit_latex="K^{-1}" >
                <expression analysistype="steadystate" planar="alpha"
                                                       axi="alpha" />
            </localvariable>
            <localvariable id="elasticity_temperature" name="Temperature" type="scalar"
                           shortname="T" shortname_html="&lt;i&gt;T&lt;/i&gt;" shortname_latex="T"
                           unit="K" unit_html="K" unit_latex="K" >
                <expression analysistype="steadystate" planar="T"
                                                       axi="T" />
            </localvariable>
            <localvariable id="elasticity_temperature_reference" name="Reference temperature" type="scalar"
                           shortname="Tr" shortname_html="&lt;i&gt;T&lt;/i&gt;&lt;sub&gt;ref&lt;/sub&gt;" shortname_latex="T_{ref}"
                           unit="K" unit_html="K" unit_latex="K" >
                <expression analysistype="steadystate" planar="Tr"
                                                       axi="Tr" />
            </localvariable>
        </localvariables>

        <view>
            <scalar>
                <default analysistype="steadystate" id="elasticity_displacement" />
            </scalar>
            <vector>
                <default analysistype="steadystate" id="elasticity_displacement" />
            </vector>
        </view>

        <volumeintegrals>
            <volumeintegral id="elasticity_volume" name="Volume"
                            shortname="V" shortname_html="&lt;i&gt;V&lt;/i&gt;" shortname_latex="V"
                            unit="m3" unit_html="m&lt;sup&gt;3&lt;/sup&gt;" unit_latex="m^{3}" >
                <expression analysistype="steadystate" planar="1.0"
                                                       axi="2.0 * PI * r" />
            </volumeintegral>
            <volumeintegral id="elasticity_cross_section" name="Cross section"
                            shortname="S" shortname_html="&lt;i&gt;S&lt;/i&gt;"" shortname_latex="S"
                            unit="m2" unit_html="m&lt;sup&gt;2&lt;/sup&gt;" unit_latex="m^{2}" >
                <expression analysistype="steadystate" planar="1.0"
                                                       axi="1.0" />
            </volumeintegral>
        </volumeintegrals>

        <surfaceintegrals>
            <surfaceintegral id="elasticity_length" name="Length"
                             shortname="l" shortname_html="&lt;i&gt;l&lt;/i&gt;"" shortname_latex="l"
                             unit="m" unit_html="m" unit_latex="m" >
                <expression analysistype="steadystate" planar="1.0"
                                                       axi="1.0" />
            </surfaceintegral>
            <surfaceintegral id="elasticity_surface" name="Surface"
                             shortname="S" shortname_html="&lt;i&gt;S&lt;/i&gt;"" shortname_latex="S"
                             unit="m2" unit_html="m&lt;sup&gt;2&lt;/sup&gt;" unit_latex="m^{2}" >
                <expression analysistype="steadystate" planar="1.0"
                                                       axi="2.0 * PI * r" />
            </surfaceintegral>
        </surfaceintegrals>
    </postprocessor>
</module>


<!--
termoclen...
            <vector i="1" planar="fx * vval + ((3*(E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu)) + 2*E / (2.0*(1.0 + nu))) * alpha * (T - Tr)) * vdx"
                          axi="fr * r * vval" />
            <vector i="2" planar="fy * vval + ((3*(E * nu) / ((1.0 + nu) * (1.0 - 2.0*nu)) + 2*E / (2.0*(1.0 + nu))) * alpha * (T - Tr)) * vdy"
                          axi="fz * r * vval" />-->
